DROP DATABASE IF EXISTS dogproject;
CREATE DATABASE dogproject;
USE dogproject;

CREATE TABLE voters
(
	id				INT				PRIMARY KEY		AUTO_INCREMENT,
    state 			VARCHAR(40)		NOT NULL,
    age_above_18	BOOLEAN 		NOT NULL 		DEFAULT FALSE,
    eligable 		BOOLEAN			NOT NULL 		DEFAULT FALSE,
    race			VARCHAR(40)		DEFAULT NULL,
    gender			VARCHAR(40)		DEFAULT NULL,
    education 		VARCHAR(40)		DEFAULT NULL,
    age				VARCHAR(40)		DEFAULT NULL, 
    party			VARCHAR(40)		DEFAULT NULL,
    lgbtq			BOOLEAN			DEFAULT NULL
);

CREATE TABLE tier 
(
	id			INT 	PRIMARY KEY 	AUTO_INCREMENT,
    candidate1  VARCHAR(40),
    candidate2 	VARCHAR(40),
    candidate3 	VARCHAR(40),
    candidate4 	VARCHAR(40),
    candidate5 	VARCHAR(40),
    candidate6 	VARCHAR(40)
);

CREATE TABLE ballot
(
	id				INT 			PRIMARY KEY 	AUTO_INCREMENT,
    voter			INT 			NOT NULL,
    top_candidate 	VARCHAR(40) 	NOT NULL,
    tier1			INT,
    tier2			INT,
    tier3			INT,
    tier4			INT,
    tier5			INT,
    tier6			INT,
    CONSTRAINT ballot_voter_fk FOREIGN KEY (voter) REFERENCES voter(id)
		ON UPDATE CASCADE
        ON DELETE CASCADE,
	CONSTRAINT ballot_tier1_fk FOREIGN KEY (tier1) REFERENCES tier(id)
		ON UPDATE CASCADE
        ON DELETE NO ACTION,
	CONSTRAINT ballot_tier2_fk FOREIGN KEY (tier2) REFERENCES tier(id)
		ON UPDATE CASCADE
        ON DELETE NO ACTION,
	CONSTRAINT ballot_tier3_fk FOREIGN KEY (tier3) REFERENCES tier(id)
		ON UPDATE CASCADE
        ON DELETE NO ACTION,
	CONSTRAINT ballot_tier4_fk FOREIGN KEY (tier4) REFERENCES tier(id)
		ON UPDATE CASCADE
        ON DELETE NO ACTION,
	CONSTRAINT ballot_tier5_fk FOREIGN KEY (tier5) REFERENCES tier(id)
		ON UPDATE CASCADE
        ON DELETE NO ACTION,
	CONSTRAINT ballot_tier6_fk FOREIGN KEY (tier6) REFERENCES tier(id)
		ON UPDATE CASCADE
        ON DELETE NO ACTION
)
